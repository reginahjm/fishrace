<html>
  <head>
    <link type="stylesheet" href="style.css">
  </head>
  <body>
    <p id="texthere"></p>
    <div id="startplatform">

    </div>


    <script src="/socket.io/socket.io.js"></script>
    <script type="text/javascript">
      var fish = [];
      var socket = io.connect('http://104.131.169.15:3000');

      socket.on('connect', function(){
        console.log("connected");
      });

      var startposition = 20;
      socket.on('enterRace', function(color, socketid){
        
        var newfish = {
          fishcolor: color,
          id: socketid,
          xpos: startposition
        }
        fish.push(newfish);
        console.log(newfish);

        var thisfish = document.createElement("div");
        document.body.appendChild(thisfish);
        thisfish.id = socketid;
        thisfish.style.position = "absolute";
        thisfish.style.width = "50px";
        thisfish.style.height = "50px";
        thisfish.style.left = startposition;
        thisfish.style.bottom = 100;
        thisfish.style.backgroundColor = color;

        startposition += 100;

      });

      socket.on('updateRace', function(newTotalDist, socketid){
        var thisfish = document.getElementById(socketid);
        if (newTotalDist >= window.innerHeight-100){
          document.getElementById("texthere").innerHTML = "We have a winner!!";
        } else {
          thisfish.style.bottom = newTotalDist+100;
        }
      });

      socket.on('takeoutFish', function(socketid){
        var thisfish = document.getElementById(socketid);
        thisfish.style.display = "none";
      })
    </script>
  </body>
</html>